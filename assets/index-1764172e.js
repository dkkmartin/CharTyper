(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();class jt{constructor(){this.isRunning=!1,this.startTime=0,this.overallTime=0}_getTimeElapsedSinceLastStart(){return this.startTime?Date.now()-this.startTime:0}start(){if(this.isRunning)return console.error("Timer is already running");this.isRunning=!0,this.startTime=Date.now()}stop(){if(!this.isRunning)return console.error("Timer is already stopped");this.isRunning=!1,this.overallTime=this.overallTime+this._getTimeElapsedSinceLastStart()}reset(){if(this.overallTime=0,this.isRunning){this.startTime=Date.now();return}this.startTime=0}getTime(){return this.startTime?this.isRunning?this.overallTime+this._getTimeElapsedSinceLastStart():this.overallTime:0}}/*! js-cookie v3.0.5 | MIT */function ie(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)n[r]=t[r]}return n}var Dt={read:function(n){return n[0]==='"'&&(n=n.slice(1,-1)),n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(n){return encodeURIComponent(n).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function ve(n,e){function t(i,s,o){if(!(typeof document>"u")){o=ie({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var c="";for(var a in o)o[a]&&(c+="; "+a,o[a]!==!0&&(c+="="+o[a].split(";")[0]));return document.cookie=i+"="+n.write(s,i)+c}}function r(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var s=document.cookie?document.cookie.split("; "):[],o={},c=0;c<s.length;c++){var a=s[c].split("="),l=a.slice(1).join("=");try{var u=decodeURIComponent(a[0]);if(o[u]=n.read(l,u),i===u)break}catch{}}return i?o[i]:o}}return Object.create({set:t,get:r,remove:function(i,s){t(i,"",ie({},s,{expires:-1}))},withAttributes:function(i){return ve(this.converter,ie({},this.attributes,i))},withConverter:function(i){return ve(ie({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(n)}})}var z=ve(Dt,{path:"/"}),it={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},ke={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},Wt=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],ae={CSS:{},springs:{}};function M(n,e,t){return Math.min(Math.max(n,e),t)}function ee(n,e){return n.indexOf(e)>-1}function ge(n,e){return n.apply(null,e)}var p={arr:function(n){return Array.isArray(n)},obj:function(n){return ee(Object.prototype.toString.call(n),"Object")},pth:function(n){return p.obj(n)&&n.hasOwnProperty("totalLength")},svg:function(n){return n instanceof SVGElement},inp:function(n){return n instanceof HTMLInputElement},dom:function(n){return n.nodeType||p.svg(n)},str:function(n){return typeof n=="string"},fnc:function(n){return typeof n=="function"},und:function(n){return typeof n>"u"},nil:function(n){return p.und(n)||n===null},hex:function(n){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(n)},rgb:function(n){return/^rgb/.test(n)},hsl:function(n){return/^hsl/.test(n)},col:function(n){return p.hex(n)||p.rgb(n)||p.hsl(n)},key:function(n){return!it.hasOwnProperty(n)&&!ke.hasOwnProperty(n)&&n!=="targets"&&n!=="keyframes"}};function st(n){var e=/\(([^)]+)\)/.exec(n);return e?e[1].split(",").map(function(t){return parseFloat(t)}):[]}function ot(n,e){var t=st(n),r=M(p.und(t[0])?1:t[0],.1,100),i=M(p.und(t[1])?100:t[1],.1,100),s=M(p.und(t[2])?10:t[2],.1,100),o=M(p.und(t[3])?0:t[3],.1,100),c=Math.sqrt(i/r),a=s/(2*Math.sqrt(i*r)),l=a<1?c*Math.sqrt(1-a*a):0,u=1,d=a<1?(a*c+-o)/l:-o+c;function v(f){var m=e?e*f/1e3:f;return a<1?m=Math.exp(-m*a*c)*(u*Math.cos(l*m)+d*Math.sin(l*m)):m=(u+d*m)*Math.exp(-m*c),f===0||f===1?f:1-m}function S(){var f=ae.springs[n];if(f)return f;for(var m=1/6,b=0,g=0;;)if(b+=m,v(b)===1){if(g++,g>=16)break}else g=0;var h=b*m*1e3;return ae.springs[n]=h,h}return e?v:S}function Ut(n){return n===void 0&&(n=10),function(e){return Math.ceil(M(e,1e-6,1)*n)*(1/n)}}var Ft=function(){var n=11,e=1/(n-1);function t(u,d){return 1-3*d+3*u}function r(u,d){return 3*d-6*u}function i(u){return 3*u}function s(u,d,v){return((t(d,v)*u+r(d,v))*u+i(d))*u}function o(u,d,v){return 3*t(d,v)*u*u+2*r(d,v)*u+i(d)}function c(u,d,v,S,f){var m,b,g=0;do b=d+(v-d)/2,m=s(b,S,f)-u,m>0?v=b:d=b;while(Math.abs(m)>1e-7&&++g<10);return b}function a(u,d,v,S){for(var f=0;f<4;++f){var m=o(d,v,S);if(m===0)return d;var b=s(d,v,S)-u;d-=b/m}return d}function l(u,d,v,S){if(!(0<=u&&u<=1&&0<=v&&v<=1))return;var f=new Float32Array(n);if(u!==d||v!==S)for(var m=0;m<n;++m)f[m]=s(m*e,u,v);function b(g){for(var h=0,y=1,T=n-1;y!==T&&f[y]<=g;++y)h+=e;--y;var x=(g-f[y])/(f[y+1]-f[y]),C=h+x*e,F=o(C,u,v);return F>=.001?a(g,C,u,v):F===0?C:c(g,h,h+e,u,v)}return function(g){return u===d&&v===S||g===0||g===1?g:s(b(g),d,S)}}return l}(),at=function(){var n={linear:function(){return function(r){return r}}},e={Sine:function(){return function(r){return 1-Math.cos(r*Math.PI/2)}},Circ:function(){return function(r){return 1-Math.sqrt(1-r*r)}},Back:function(){return function(r){return r*r*(3*r-2)}},Bounce:function(){return function(r){for(var i,s=4;r<((i=Math.pow(2,--s))-1)/11;);return 1/Math.pow(4,3-s)-7.5625*Math.pow((i*3-2)/22-r,2)}},Elastic:function(r,i){r===void 0&&(r=1),i===void 0&&(i=.5);var s=M(r,1,10),o=M(i,.1,2);return function(c){return c===0||c===1?c:-s*Math.pow(2,10*(c-1))*Math.sin((c-1-o/(Math.PI*2)*Math.asin(1/s))*(Math.PI*2)/o)}}},t=["Quad","Cubic","Quart","Quint","Expo"];return t.forEach(function(r,i){e[r]=function(){return function(s){return Math.pow(s,i+2)}}}),Object.keys(e).forEach(function(r){var i=e[r];n["easeIn"+r]=i,n["easeOut"+r]=function(s,o){return function(c){return 1-i(s,o)(1-c)}},n["easeInOut"+r]=function(s,o){return function(c){return c<.5?i(s,o)(c*2)/2:1-i(s,o)(c*-2+2)/2}},n["easeOutIn"+r]=function(s,o){return function(c){return c<.5?(1-i(s,o)(1-c*2))/2:(i(s,o)(c*2-1)+1)/2}}}),n}();function Pe(n,e){if(p.fnc(n))return n;var t=n.split("(")[0],r=at[t],i=st(n);switch(t){case"spring":return ot(n,e);case"cubicBezier":return ge(Ft,i);case"steps":return ge(Ut,i);default:return ge(r,i)}}function ct(n){try{var e=document.querySelectorAll(n);return e}catch{return}}function ue(n,e){for(var t=n.length,r=arguments.length>=2?arguments[1]:void 0,i=[],s=0;s<t;s++)if(s in n){var o=n[s];e.call(r,o,s,n)&&i.push(o)}return i}function le(n){return n.reduce(function(e,t){return e.concat(p.arr(t)?le(t):t)},[])}function He(n){return p.arr(n)?n:(p.str(n)&&(n=ct(n)||n),n instanceof NodeList||n instanceof HTMLCollection?[].slice.call(n):[n])}function Ee(n,e){return n.some(function(t){return t===e})}function xe(n){var e={};for(var t in n)e[t]=n[t];return e}function be(n,e){var t=xe(n);for(var r in n)t[r]=e.hasOwnProperty(r)?e[r]:n[r];return t}function de(n,e){var t=xe(n);for(var r in e)t[r]=p.und(n[r])?e[r]:n[r];return t}function Bt(n){var e=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(n);return e?"rgba("+e[1]+",1)":n}function Ht(n){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,t=n.replace(e,function(c,a,l,u){return a+a+l+l+u+u}),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),i=parseInt(r[1],16),s=parseInt(r[2],16),o=parseInt(r[3],16);return"rgba("+i+","+s+","+o+",1)"}function Nt(n){var e=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(n)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(n),t=parseInt(e[1],10)/360,r=parseInt(e[2],10)/100,i=parseInt(e[3],10)/100,s=e[4]||1;function o(v,S,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?v+(S-v)*6*f:f<1/2?S:f<2/3?v+(S-v)*(2/3-f)*6:v}var c,a,l;if(r==0)c=a=l=i;else{var u=i<.5?i*(1+r):i+r-i*r,d=2*i-u;c=o(d,u,t+1/3),a=o(d,u,t),l=o(d,u,t-1/3)}return"rgba("+c*255+","+a*255+","+l*255+","+s+")"}function $t(n){if(p.rgb(n))return Bt(n);if(p.hex(n))return Ht(n);if(p.hsl(n))return Nt(n)}function j(n){var e=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(n);if(e)return e[1]}function Vt(n){if(ee(n,"translate")||n==="perspective")return"px";if(ee(n,"rotate")||ee(n,"skew"))return"deg"}function we(n,e){return p.fnc(n)?n(e.target,e.id,e.total):n}function R(n,e){return n.getAttribute(e)}function Ie(n,e,t){var r=j(e);if(Ee([t,"deg","rad","turn"],r))return e;var i=ae.CSS[e+t];if(!p.und(i))return i;var s=100,o=document.createElement(n.tagName),c=n.parentNode&&n.parentNode!==document?n.parentNode:document.body;c.appendChild(o),o.style.position="absolute",o.style.width=s+t;var a=s/o.offsetWidth;c.removeChild(o);var l=a*parseFloat(e);return ae.CSS[e+t]=l,l}function ut(n,e,t){if(e in n.style){var r=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=n.style[e]||getComputedStyle(n).getPropertyValue(r)||"0";return t?Ie(n,i,t):i}}function Le(n,e){if(p.dom(n)&&!p.inp(n)&&(!p.nil(R(n,e))||p.svg(n)&&n[e]))return"attribute";if(p.dom(n)&&Ee(Wt,e))return"transform";if(p.dom(n)&&e!=="transform"&&ut(n,e))return"css";if(n[e]!=null)return"object"}function lt(n){if(p.dom(n)){for(var e=n.style.transform||"",t=/(\w+)\(([^)]*)\)/g,r=new Map,i;i=t.exec(e);)r.set(i[1],i[2]);return r}}function Kt(n,e,t,r){var i=ee(e,"scale")?1:0+Vt(e),s=lt(n).get(e)||i;return t&&(t.transforms.list.set(e,s),t.transforms.last=e),r?Ie(n,s,r):s}function qe(n,e,t,r){switch(Le(n,e)){case"transform":return Kt(n,e,r,t);case"css":return ut(n,e,t);case"attribute":return R(n,e);default:return n[e]||0}}function Ae(n,e){var t=/^(\*=|\+=|-=)/.exec(n);if(!t)return n;var r=j(n)||0,i=parseFloat(e),s=parseFloat(n.replace(t[0],""));switch(t[0][0]){case"+":return i+s+r;case"-":return i-s+r;case"*":return i*s+r}}function dt(n,e){if(p.col(n))return $t(n);if(/\s/g.test(n))return n;var t=j(n),r=t?n.substr(0,n.length-t.length):n;return e?r+e:r}function Me(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function zt(n){return Math.PI*2*R(n,"r")}function Gt(n){return R(n,"width")*2+R(n,"height")*2}function Jt(n){return Me({x:R(n,"x1"),y:R(n,"y1")},{x:R(n,"x2"),y:R(n,"y2")})}function ht(n){for(var e=n.points,t=0,r,i=0;i<e.numberOfItems;i++){var s=e.getItem(i);i>0&&(t+=Me(r,s)),r=s}return t}function Qt(n){var e=n.points;return ht(n)+Me(e.getItem(e.numberOfItems-1),e.getItem(0))}function ft(n){if(n.getTotalLength)return n.getTotalLength();switch(n.tagName.toLowerCase()){case"circle":return zt(n);case"rect":return Gt(n);case"line":return Jt(n);case"polyline":return ht(n);case"polygon":return Qt(n)}}function Zt(n){var e=ft(n);return n.setAttribute("stroke-dasharray",e),e}function Yt(n){for(var e=n.parentNode;p.svg(e)&&p.svg(e.parentNode);)e=e.parentNode;return e}function pt(n,e){var t=e||{},r=t.el||Yt(n),i=r.getBoundingClientRect(),s=R(r,"viewBox"),o=i.width,c=i.height,a=t.viewBox||(s?s.split(" "):[0,0,o,c]);return{el:r,viewBox:a,x:a[0]/1,y:a[1]/1,w:o,h:c,vW:a[2],vH:a[3]}}function Xt(n,e){var t=p.str(n)?ct(n)[0]:n,r=e||100;return function(i){return{property:i,el:t,svg:pt(t),totalLength:ft(t)*(r/100)}}}function en(n,e,t){function r(u){u===void 0&&(u=0);var d=e+u>=1?e+u:0;return n.el.getPointAtLength(d)}var i=pt(n.el,n.svg),s=r(),o=r(-1),c=r(1),a=t?1:i.w/i.vW,l=t?1:i.h/i.vH;switch(n.property){case"x":return(s.x-i.x)*a;case"y":return(s.y-i.y)*l;case"angle":return Math.atan2(c.y-o.y,c.x-o.x)*180/Math.PI}}function Ne(n,e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=dt(p.pth(n)?n.totalLength:n,e)+"";return{original:r,numbers:r.match(t)?r.match(t).map(Number):[0],strings:p.str(n)||e?r.split(t):[]}}function Re(n){var e=n?le(p.arr(n)?n.map(He):He(n)):[];return ue(e,function(t,r,i){return i.indexOf(t)===r})}function gt(n){var e=Re(n);return e.map(function(t,r){return{target:t,id:r,total:e.length,transforms:{list:lt(t)}}})}function tn(n,e){var t=xe(e);if(/^spring/.test(t.easing)&&(t.duration=ot(t.easing)),p.arr(n)){var r=n.length,i=r===2&&!p.obj(n[0]);i?n={value:n}:p.fnc(e.duration)||(t.duration=e.duration/r)}var s=p.arr(n)?n:[n];return s.map(function(o,c){var a=p.obj(o)&&!p.pth(o)?o:{value:o};return p.und(a.delay)&&(a.delay=c?0:e.delay),p.und(a.endDelay)&&(a.endDelay=c===s.length-1?e.endDelay:0),a}).map(function(o){return de(o,t)})}function nn(n){for(var e=ue(le(n.map(function(s){return Object.keys(s)})),function(s){return p.key(s)}).reduce(function(s,o){return s.indexOf(o)<0&&s.push(o),s},[]),t={},r=function(s){var o=e[s];t[o]=n.map(function(c){var a={};for(var l in c)p.key(l)?l==o&&(a.value=c[l]):a[l]=c[l];return a})},i=0;i<e.length;i++)r(i);return t}function rn(n,e){var t=[],r=e.keyframes;r&&(e=de(nn(r),e));for(var i in e)p.key(i)&&t.push({name:i,tweens:tn(e[i],n)});return t}function sn(n,e){var t={};for(var r in n){var i=we(n[r],e);p.arr(i)&&(i=i.map(function(s){return we(s,e)}),i.length===1&&(i=i[0])),t[r]=i}return t.duration=parseFloat(t.duration),t.delay=parseFloat(t.delay),t}function on(n,e){var t;return n.tweens.map(function(r){var i=sn(r,e),s=i.value,o=p.arr(s)?s[1]:s,c=j(o),a=qe(e.target,n.name,c,e),l=t?t.to.original:a,u=p.arr(s)?s[0]:l,d=j(u)||j(a),v=c||d;return p.und(o)&&(o=l),i.from=Ne(u,v),i.to=Ne(Ae(o,u),v),i.start=t?t.end:0,i.end=i.start+i.delay+i.duration+i.endDelay,i.easing=Pe(i.easing,i.duration),i.isPath=p.pth(s),i.isPathTargetInsideSVG=i.isPath&&p.svg(e.target),i.isColor=p.col(i.from.original),i.isColor&&(i.round=1),t=i,i})}var mt={css:function(n,e,t){return n.style[e]=t},attribute:function(n,e,t){return n.setAttribute(e,t)},object:function(n,e,t){return n[e]=t},transform:function(n,e,t,r,i){if(r.list.set(e,t),e===r.last||i){var s="";r.list.forEach(function(o,c){s+=c+"("+o+") "}),n.style.transform=s}}};function yt(n,e){var t=gt(n);t.forEach(function(r){for(var i in e){var s=we(e[i],r),o=r.target,c=j(s),a=qe(o,i,c,r),l=c||j(a),u=Ae(dt(s,l),a),d=Le(o,i);mt[d](o,i,u,r.transforms,!0)}})}function an(n,e){var t=Le(n.target,e.name);if(t){var r=on(e,n),i=r[r.length-1];return{type:t,property:e.name,animatable:n,tweens:r,duration:i.end,delay:r[0].delay,endDelay:i.endDelay}}}function cn(n,e){return ue(le(n.map(function(t){return e.map(function(r){return an(t,r)})})),function(t){return!p.und(t)})}function vt(n,e){var t=n.length,r=function(s){return s.timelineOffset?s.timelineOffset:0},i={};return i.duration=t?Math.max.apply(Math,n.map(function(s){return r(s)+s.duration})):e.duration,i.delay=t?Math.min.apply(Math,n.map(function(s){return r(s)+s.delay})):e.delay,i.endDelay=t?i.duration-Math.max.apply(Math,n.map(function(s){return r(s)+s.duration-s.endDelay})):e.endDelay,i}var $e=0;function un(n){var e=be(it,n),t=be(ke,n),r=rn(t,n),i=gt(n.targets),s=cn(i,r),o=vt(s,t),c=$e;return $e++,de(e,{id:c,children:[],animatables:i,animations:s,duration:o.duration,delay:o.delay,endDelay:o.endDelay})}var L=[],bt=function(){var n;function e(){!n&&(!Ve()||!w.suspendWhenDocumentHidden)&&L.length>0&&(n=requestAnimationFrame(t))}function t(i){for(var s=L.length,o=0;o<s;){var c=L[o];c.paused?(L.splice(o,1),s--):(c.tick(i),o++)}n=o>0?requestAnimationFrame(t):void 0}function r(){w.suspendWhenDocumentHidden&&(Ve()?n=cancelAnimationFrame(n):(L.forEach(function(i){return i._onDocumentVisibility()}),bt()))}return typeof document<"u"&&document.addEventListener("visibilitychange",r),e}();function Ve(){return!!document&&document.hidden}function w(n){n===void 0&&(n={});var e=0,t=0,r=0,i,s=0,o=null;function c(h){var y=window.Promise&&new Promise(function(T){return o=T});return h.finished=y,y}var a=un(n);c(a);function l(){var h=a.direction;h!=="alternate"&&(a.direction=h!=="normal"?"normal":"reverse"),a.reversed=!a.reversed,i.forEach(function(y){return y.reversed=a.reversed})}function u(h){return a.reversed?a.duration-h:h}function d(){e=0,t=u(a.currentTime)*(1/w.speed)}function v(h,y){y&&y.seek(h-y.timelineOffset)}function S(h){if(a.reversePlayback)for(var T=s;T--;)v(h,i[T]);else for(var y=0;y<s;y++)v(h,i[y])}function f(h){for(var y=0,T=a.animations,x=T.length;y<x;){var C=T[y],F=C.animatable,J=C.tweens,$=J.length-1,O=J[$];$&&(O=ue(J,function(_t){return h<_t.end})[0]||O);for(var V=M(h-O.start-O.delay,0,O.duration)/O.duration,re=isNaN(V)?1:O.easing(V),I=O.to.strings,he=O.round,fe=[],Rt=O.to.numbers.length,K=void 0,Q=0;Q<Rt;Q++){var Z=void 0,We=O.to.numbers[Q],Ue=O.from.numbers[Q]||0;O.isPath?Z=en(O.value,re*We,O.isPathTargetInsideSVG):Z=Ue+re*(We-Ue),he&&(O.isColor&&Q>2||(Z=Math.round(Z*he)/he)),fe.push(Z)}var Fe=I.length;if(!Fe)K=fe[0];else{K=I[0];for(var Y=0;Y<Fe;Y++){I[Y];var Be=I[Y+1],pe=fe[Y];isNaN(pe)||(Be?K+=pe+Be:K+=pe+" ")}}mt[C.type](F.target,C.property,K,F.transforms),C.currentValue=K,y++}}function m(h){a[h]&&!a.passThrough&&a[h](a)}function b(){a.remaining&&a.remaining!==!0&&a.remaining--}function g(h){var y=a.duration,T=a.delay,x=y-a.endDelay,C=u(h);a.progress=M(C/y*100,0,100),a.reversePlayback=C<a.currentTime,i&&S(C),!a.began&&a.currentTime>0&&(a.began=!0,m("begin")),!a.loopBegan&&a.currentTime>0&&(a.loopBegan=!0,m("loopBegin")),C<=T&&a.currentTime!==0&&f(0),(C>=x&&a.currentTime!==y||!y)&&f(y),C>T&&C<x?(a.changeBegan||(a.changeBegan=!0,a.changeCompleted=!1,m("changeBegin")),m("change"),f(C)):a.changeBegan&&(a.changeCompleted=!0,a.changeBegan=!1,m("changeComplete")),a.currentTime=M(C,0,y),a.began&&m("update"),h>=y&&(t=0,b(),a.remaining?(e=r,m("loopComplete"),a.loopBegan=!1,a.direction==="alternate"&&l()):(a.paused=!0,a.completed||(a.completed=!0,m("loopComplete"),m("complete"),!a.passThrough&&"Promise"in window&&(o(),c(a)))))}return a.reset=function(){var h=a.direction;a.passThrough=!1,a.currentTime=0,a.progress=0,a.paused=!0,a.began=!1,a.loopBegan=!1,a.changeBegan=!1,a.completed=!1,a.changeCompleted=!1,a.reversePlayback=!1,a.reversed=h==="reverse",a.remaining=a.loop,i=a.children,s=i.length;for(var y=s;y--;)a.children[y].reset();(a.reversed&&a.loop!==!0||h==="alternate"&&a.loop===1)&&a.remaining++,f(a.reversed?a.duration:0)},a._onDocumentVisibility=d,a.set=function(h,y){return yt(h,y),a},a.tick=function(h){r=h,e||(e=r),g((r+(t-e))*w.speed)},a.seek=function(h){g(u(h))},a.pause=function(){a.paused=!0,d()},a.play=function(){a.paused&&(a.completed&&a.reset(),a.paused=!1,L.push(a),d(),bt())},a.reverse=function(){l(),a.completed=!a.reversed,d()},a.restart=function(){a.reset(),a.play()},a.remove=function(h){var y=Re(h);wt(y,a)},a.reset(),a.autoplay&&a.play(),a}function Ke(n,e){for(var t=e.length;t--;)Ee(n,e[t].animatable.target)&&e.splice(t,1)}function wt(n,e){var t=e.animations,r=e.children;Ke(n,t);for(var i=r.length;i--;){var s=r[i],o=s.animations;Ke(n,o),!o.length&&!s.children.length&&r.splice(i,1)}!t.length&&!r.length&&e.pause()}function ln(n){for(var e=Re(n),t=L.length;t--;){var r=L[t];wt(e,r)}}function dn(n,e){e===void 0&&(e={});var t=e.direction||"normal",r=e.easing?Pe(e.easing):null,i=e.grid,s=e.axis,o=e.from||0,c=o==="first",a=o==="center",l=o==="last",u=p.arr(n),d=parseFloat(u?n[0]:n),v=u?parseFloat(n[1]):0,S=j(u?n[1]:n)||0,f=e.start||0+(u?d:0),m=[],b=0;return function(g,h,y){if(c&&(o=0),a&&(o=(y-1)/2),l&&(o=y-1),!m.length){for(var T=0;T<y;T++){if(!i)m.push(Math.abs(o-T));else{var x=a?(i[0]-1)/2:o%i[0],C=a?(i[1]-1)/2:Math.floor(o/i[0]),F=T%i[0],J=Math.floor(T/i[0]),$=x-F,O=C-J,V=Math.sqrt($*$+O*O);s==="x"&&(V=-$),s==="y"&&(V=-O),m.push(V)}b=Math.max.apply(Math,m)}r&&(m=m.map(function(I){return r(I/b)*b})),t==="reverse"&&(m=m.map(function(I){return s?I<0?I*-1:-I:Math.abs(b-I)}))}var re=u?(v-d)/b:d;return f+re*(Math.round(m[h]*100)/100)+S}}function hn(n){n===void 0&&(n={});var e=w(n);return e.duration=0,e.add=function(t,r){var i=L.indexOf(e),s=e.children;i>-1&&L.splice(i,1);function o(v){v.passThrough=!0}for(var c=0;c<s.length;c++)o(s[c]);var a=de(t,be(ke,n));a.targets=a.targets||n.targets;var l=e.duration;a.autoplay=!1,a.direction=e.direction,a.timelineOffset=p.und(r)?l:Ae(r,l),o(e),e.seek(a.timelineOffset);var u=w(a);o(u),s.push(u);var d=vt(s,n);return e.delay=d.delay,e.endDelay=d.endDelay,e.duration=d.duration,e.seek(0),e.reset(),e.autoplay&&e.play(),e},e}w.version="3.2.1";w.speed=1;w.suspendWhenDocumentHidden=!0;w.running=L;w.remove=ln;w.get=qe;w.set=yt;w.convertPx=Ie;w.path=Xt;w.setDashoffset=Zt;w.stagger=dn;w.timeline=hn;w.easing=Pe;w.penner=at;w.random=function(n,e){return Math.floor(Math.random()*(e-n+1))+n};const fn=window.matchMedia("(prefers-reduced-motion: reduce)")===!0||window.matchMedia("(prefers-reduced-motion: reduce)").matches===!0;function ze(n){const e=document.querySelector(".background_animation");if(e)for(let t=0;t<n;t++){const r=document.createElement("p");e.appendChild(r)}}function St(){document.querySelectorAll(".background_animation p").forEach(e=>{e.clientHeight<=0&&e.remove()})}fn||(ze(400),document.addEventListener("DOMContentLoaded",()=>{function n(){St(),requestAnimationFrame(n)}requestAnimationFrame(n)}),window.addEventListener("resize",()=>{ze(300)}));const Ge=document.querySelector(".ml11 .letters");Ge.innerHTML=Ge.textContent.replace(/([^\x00-\x80]|\w)/g,"<span class='letter'>$&</span>");const pn=window.matchMedia("(prefers-reduced-motion: reduce)")===!0||window.matchMedia("(prefers-reduced-motion: reduce)").matches===!0;let ce,Se,Ce;pn||document.addEventListener("DOMContentLoaded",()=>{St(),ce=document.querySelectorAll(".background_animation p");const n=ce.length,e=100,{numRows:t,numColumns:r}=gn(n,e);Ce=t+1,Se=r-3});function gn(n,e){const t=Math.floor(window.innerWidth/e);return{numRows:Math.ceil(n/t),numColumns:t}}function mn(){w({targets:"#word__input",opacity:0,delay:500,duration:1e3}),w({targets:"#information",translateY:function(){return window.innerHeight/6},width:"55%",delay:500,duration:1500,easing:"easeInOutQuart"}),w({targets:"#text",opacity:0,delay:500,duration:500,easing:"linear"}),w({targets:".netWPMcon",opacity:1,delay:500,duration:1e3,easing:"linear"}),w({targets:[".fa-equals",".fa-xmark"],opacity:1,delay:2e3,duration:1e3,easing:"linear"}),w({targets:".new_highscore__div",opacity:[0,1],delay:1500,duration:1e3,easing:"linear"})}function yn(){w.timeline().add({targets:".ml11 .line",scaleY:[0,1],opacity:[.5,1],easing:"easeOutExpo",duration:700}).add({targets:".ml11 .line",translateX:[0,document.querySelector(".ml11 .letters").getBoundingClientRect().width+10],easing:"easeOutExpo",duration:700,delay:100}).add({targets:".ml11 .letter",opacity:[0,1],easing:"easeOutExpo",duration:600,offset:"-=775",delay:(n,e)=>34*(e+1)}).add({targets:".line1",opacity:0,duration:1e3,easing:"easeOutExpo"}).add({targets:ce,opacity:[0,1],scale:[{value:.1,easing:"easeOutSine",duration:500},{value:1,easing:"easeInOutQuad",duration:1200}],delay:w.stagger(100,{grid:[Se,Ce],from:"center"})}).add({targets:ce,opacity:[1,1],scale:[{value:1,easing:"easeOutSine",duration:500},{value:.1,easing:"easeInOutQuad",duration:1200}],delay:w.stagger(100,{grid:[Se,Ce],from:"center"})}),w({targets:".buttons",opacity:[0,1],delay:2e3,duration:2e3})}function vn(){const n=document.querySelectorAll(".user");w({targets:".highscore",opacity:[0,1],delay:1e3}),w.timeline().add({targets:n,scale:[.5,1],opacity:[0,1],delay:w.stagger(100,{start:1600}),easing:"easeOutCubic"}).add({targets:".user__1",keyframes:[{scale:1.02},{scale:1}]})}class q extends Error{constructor(e){var t,r,i,s;super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,q.prototype),e!==null&&typeof e=="object"&&(this.url=typeof e.url=="string"?e.url:"",this.status=typeof e.status=="number"?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,e.response!==null&&typeof e.response=="object"?this.response=e.response:e.data!==null&&typeof e.data=="object"?this.response=e.data:this.response={}),this.originalError||e instanceof q||(this.originalError=e),typeof DOMException<"u"&&e instanceof DOMException&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=(t=this.response)==null?void 0:t.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":(s=(i=(r=this.originalError)==null?void 0:r.cause)==null?void 0:i.message)!=null&&s.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong while processing your request.")}get data(){return this.response}toJSON(){return{...this}}}const se=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function bn(n,e){const t={};if(typeof n!="string")return t;const r=Object.assign({},e||{}).decode||wn;let i=0;for(;i<n.length;){const s=n.indexOf("=",i);if(s===-1)break;let o=n.indexOf(";",i);if(o===-1)o=n.length;else if(o<s){i=n.lastIndexOf(";",s-1)+1;continue}const c=n.slice(i,s).trim();if(t[c]===void 0){let a=n.slice(s+1,o).trim();a.charCodeAt(0)===34&&(a=a.slice(1,-1));try{t[c]=r(a)}catch{t[c]=a}}i=o+1}return t}function Je(n,e,t){const r=Object.assign({},t||{}),i=r.encode||Sn;if(!se.test(n))throw new TypeError("argument name is invalid");const s=i(e);if(s&&!se.test(s))throw new TypeError("argument val is invalid");let o=n+"="+s;if(r.maxAge!=null){const c=r.maxAge-0;if(isNaN(c)||!isFinite(c))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(c)}if(r.domain){if(!se.test(r.domain))throw new TypeError("option domain is invalid");o+="; Domain="+r.domain}if(r.path){if(!se.test(r.path))throw new TypeError("option path is invalid");o+="; Path="+r.path}if(r.expires){if(!function(a){return Object.prototype.toString.call(a)==="[object Date]"||a instanceof Date}(r.expires)||isNaN(r.expires.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():r.priority){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o}function wn(n){return n.indexOf("%")!==-1?decodeURIComponent(n):n}function Sn(n){return encodeURIComponent(n)}let Ct;function oe(n){if(n)try{const e=decodeURIComponent(Ct(n.split(".")[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(e)||{}}catch{}return{}}function Tt(n,e=0){let t=oe(n);return!(Object.keys(t).length>0&&(!t.exp||t.exp-e>Date.now()/1e3))}Ct=typeof atob=="function"?atob:n=>{let e=String(n).replace(/=+$/,"");if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,r,i=0,s=0,o="";r=e.charAt(s++);~r&&(t=i%4?64*t+r:r,i++%4)?o+=String.fromCharCode(255&t>>(-2*i&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return o};const Qe="pb_auth";class Cn{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get model(){return this.baseModel}get isValid(){return!Tt(this.token)}get isAdmin(){return oe(this.token).type==="admin"}get isAuthRecord(){return oe(this.token).type==="authRecord"}save(e,t){this.baseToken=e||"",this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=Qe){const r=bn(e||"")[t]||"";let i={};try{i=JSON.parse(r),(typeof i===null||typeof i!="object"||Array.isArray(i))&&(i={})}catch{}this.save(i.token||"",i.model||null)}exportToCookie(e,t=Qe){var a,l;const r={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},i=oe(this.token);r.expires=i!=null&&i.exp?new Date(1e3*i.exp):new Date("1970-01-01"),e=Object.assign({},r,e);const s={token:this.token,model:this.model?JSON.parse(JSON.stringify(this.model)):null};let o=Je(t,JSON.stringify(s),e);const c=typeof Blob<"u"?new Blob([o]).size:o.length;if(s.model&&c>4096){s.model={id:(a=s==null?void 0:s.model)==null?void 0:a.id,email:(l=s==null?void 0:s.model)==null?void 0:l.email};const u=["collectionId","username","verified"];for(const d in this.model)u.includes(d)&&(s.model[d]=this.model[d]);o=Je(t,JSON.stringify(s),e)}return o}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.model),()=>{for(let r=this._onChangeCallbacks.length-1;r>=0;r--)if(this._onChangeCallbacks[r]==e)return delete this._onChangeCallbacks[r],void this._onChangeCallbacks.splice(r,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.model)}}class Tn extends Cn{constructor(e="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get model(){return(this._storageGet(this.storageKey)||{}).model||null}save(e,t){this._storageSet(this.storageKey,{token:e,model:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(typeof window<"u"&&(window!=null&&window.localStorage)){const t=window.localStorage.getItem(e)||"";try{return JSON.parse(t)}catch{return t}}return this.storageFallback[e]}_storageSet(e,t){if(typeof window<"u"&&(window!=null&&window.localStorage)){let r=t;typeof t!="string"&&(r=JSON.stringify(t)),window.localStorage.setItem(e,r)}else this.storageFallback[e]=t}_storageRemove(e){var t;typeof window<"u"&&(window!=null&&window.localStorage)&&((t=window.localStorage)==null||t.removeItem(e)),delete this.storageFallback[e]}_bindStorageEvent(){typeof window<"u"&&(window!=null&&window.localStorage)&&window.addEventListener&&window.addEventListener("storage",e=>{if(e.key!=this.storageKey)return;const t=this._storageGet(this.storageKey)||{};super.save(t.token||"",t.model||null)})}}class N{constructor(e){this.client=e}}class On extends N{getAll(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/settings",e)}update(e,t){return t=Object.assign({method:"PATCH",body:e},t),this.client.send("/api/settings",t)}testS3(e="storage",t){return t=Object.assign({method:"POST",body:{filesystem:e}},t),this.client.send("/api/settings/test/s3",t).then(()=>!0)}testEmail(e,t,r){return r=Object.assign({method:"POST",body:{email:e,template:t}},r),this.client.send("/api/settings/test/email",r).then(()=>!0)}generateAppleClientSecret(e,t,r,i,s,o){return o=Object.assign({method:"POST",body:{clientId:e,teamId:t,keyId:r,privateKey:i,duration:s}},o),this.client.send("/api/settings/apple/generate-client-secret",o)}}class _e extends N{decode(e){return e}getFullList(e,t){if(typeof e=="number")return this._getFullList(e,t);let r=500;return(t=Object.assign({},e,t)).batch&&(r=t.batch,delete t.batch),this._getFullList(r,t)}getList(e=1,t=30,r){return(r=Object.assign({method:"GET"},r)).query=Object.assign({page:e,perPage:t},r.query),this.client.send(this.baseCrudPath,r).then(i=>{var s;return i.items=((s=i.items)==null?void 0:s.map(o=>this.decode(o)))||[],i})}getFirstListItem(e,t){return(t=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then(r=>{var i;if(!((i=r==null?void 0:r.items)!=null&&i.length))throw new q({status:404,data:{code:404,message:"The requested resource wasn't found.",data:{}}});return r.items[0]})}getOne(e,t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(r=>this.decode(r))}create(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send(this.baseCrudPath,t).then(r=>this.decode(r))}update(e,t,r){return r=Object.assign({method:"PATCH",body:t},r),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),r).then(i=>this.decode(i))}delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(()=>!0)}_getFullList(e=500,t){(t=t||{}).query=Object.assign({skipTotal:1},t.query);let r=[],i=async s=>this.getList(s,e||500,t).then(o=>{const c=o.items;return r=r.concat(c),c.length==o.perPage?i(s+1):r});return i(1)}}function P(n,e,t,r){const i=r!==void 0;return i||t!==void 0?i?(console.warn(n),e.body=Object.assign({},e.body,t),e.query=Object.assign({},e.query,r),e):Object.assign(e,t):e}function me(n){var e;(e=n._resetAutoRefresh)==null||e.call(n)}class kn extends _e{get baseCrudPath(){return"/api/admins"}update(e,t,r){return super.update(e,t,r).then(i=>{var s,o;return((s=this.client.authStore.model)==null?void 0:s.id)===i.id&&((o=this.client.authStore.model)==null?void 0:o.collectionId)===void 0&&this.client.authStore.save(this.client.authStore.token,i),i})}delete(e,t){return super.delete(e,t).then(r=>{var i,s;return r&&((i=this.client.authStore.model)==null?void 0:i.id)===e&&((s=this.client.authStore.model)==null?void 0:s.collectionId)===void 0&&this.client.authStore.clear(),r})}authResponse(e){const t=this.decode((e==null?void 0:e.admin)||{});return e!=null&&e.token&&(e!=null&&e.admin)&&this.client.authStore.save(e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",admin:t})}async authWithPassword(e,t,r,i){let s={method:"POST",body:{identity:e,password:t}};s=P("This form of authWithPassword(email, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(email, pass, options?).",s,r,i);const o=s.autoRefreshThreshold;delete s.autoRefreshThreshold,s.autoRefresh||me(this.client);let c=await this.client.send(this.baseCrudPath+"/auth-with-password",s);return c=this.authResponse(c),o&&function(l,u,d,v){me(l);const S=l.beforeSend,f=l.authStore.model,m=l.authStore.onChange((b,g)=>{(!b||(g==null?void 0:g.id)!=(f==null?void 0:f.id)||(g!=null&&g.collectionId||f!=null&&f.collectionId)&&(g==null?void 0:g.collectionId)!=(f==null?void 0:f.collectionId))&&me(l)});l._resetAutoRefresh=function(){m(),l.beforeSend=S,delete l._resetAutoRefresh},l.beforeSend=async(b,g)=>{var x;const h=l.authStore.token;if((x=g.query)!=null&&x.autoRefresh)return S?S(b,g):{url:b,sendOptions:g};let y=l.authStore.isValid;if(y&&Tt(l.authStore.token,u))try{await d()}catch{y=!1}y||await v();const T=g.headers||{};for(let C in T)if(C.toLowerCase()=="authorization"&&h==T[C]&&l.authStore.token){T[C]=l.authStore.token;break}return g.headers=T,S?S(b,g):{url:b,sendOptions:g}}}(this.client,o,()=>this.authRefresh({autoRefresh:!0}),()=>this.authWithPassword(e,t,Object.assign({autoRefresh:!0},s))),c}authRefresh(e,t){let r={method:"POST"};return r=P("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",r,e,t),this.client.send(this.baseCrudPath+"/auth-refresh",r).then(this.authResponse.bind(this))}requestPasswordReset(e,t,r){let i={method:"POST",body:{email:e}};return i=P("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",i,t,r),this.client.send(this.baseCrudPath+"/request-password-reset",i).then(()=>!0)}confirmPasswordReset(e,t,r,i,s){let o={method:"POST",body:{token:e,password:t,passwordConfirm:r}};return o=P("This form of confirmPasswordReset(resetToken, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(resetToken, password, passwordConfirm, options?).",o,i,s),this.client.send(this.baseCrudPath+"/confirm-password-reset",o).then(()=>!0)}}class Ot extends N{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentTopics=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}async subscribe(e,t){var i;if(!e)throw new Error("topic must be set.");const r=function(s){const o=s;let c;try{c=JSON.parse(o==null?void 0:o.data)}catch{}t(c||{})};return this.subscriptions[e]||(this.subscriptions[e]=[]),this.subscriptions[e].push(r),this.isConnected?this.subscriptions[e].length===1?await this.submitSubscriptions():(i=this.eventSource)==null||i.addEventListener(e,r):await this.connect(),async()=>this.unsubscribeByTopicAndListener(e,r)}async unsubscribe(e){var t;if(this.hasSubscriptionListeners(e)){if(e){for(let r of this.subscriptions[e])(t=this.eventSource)==null||t.removeEventListener(e,r);delete this.subscriptions[e]}else this.subscriptions={};this.hasSubscriptionListeners()?this.hasSubscriptionListeners(e)||await this.submitSubscriptions():this.disconnect()}}async unsubscribeByPrefix(e){var r;let t=!1;for(let i in this.subscriptions)if(i.startsWith(e)){t=!0;for(let s of this.subscriptions[i])(r=this.eventSource)==null||r.removeEventListener(i,s);delete this.subscriptions[i]}t&&(this.hasSubscriptionListeners()?await this.submitSubscriptions():this.disconnect())}async unsubscribeByTopicAndListener(e,t){var i;if(!Array.isArray(this.subscriptions[e])||!this.subscriptions[e].length)return;let r=!1;for(let s=this.subscriptions[e].length-1;s>=0;s--)this.subscriptions[e][s]===t&&(r=!0,delete this.subscriptions[e][s],this.subscriptions[e].splice(s,1),(i=this.eventSource)==null||i.removeEventListener(e,t));r&&(this.subscriptions[e].length||delete this.subscriptions[e],this.hasSubscriptionListeners()?this.hasSubscriptionListeners(e)||await this.submitSubscriptions():this.disconnect())}hasSubscriptionListeners(e){var t,r;if(this.subscriptions=this.subscriptions||{},e)return!!((t=this.subscriptions[e])!=null&&t.length);for(let i in this.subscriptions)if((r=this.subscriptions[i])!=null&&r.length)return!0;return!1}async submitSubscriptions(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentTopics=this.getNonEmptySubscriptionTopics(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentTopics},requestKey:this.getSubscriptionsCancelKey()}).catch(e=>{if(!(e!=null&&e.isAbort))throw e})}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getNonEmptySubscriptionTopics(){const e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}async connect(){if(!(this.reconnectAttempts>0))return new Promise((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()})}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildUrl("/api/realtime")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",e=>{const t=e;this.clientId=t==null?void 0:t.lastEventId,this.submitSubscriptions().then(async()=>{let r=3;for(;this.hasUnsentSubscriptions()&&r>0;)r--,await this.submitSubscriptions()}).then(()=>{for(let r of this.pendingConnects)r.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId)}).catch(r=>{this.clientId="",this.connectErrorHandler(r)})})}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionTopics();if(e.length!=this.lastSentTopics.length)return!0;for(const t of e)if(!this.lastSentTopics.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let r of this.pendingConnects)r.reject(new q(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(()=>{this.initConnect()},t)}disconnect(e=!1){var t;if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),(t=this.eventSource)==null||t.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(let r of this.pendingConnects)r.resolve();this.pendingConnects=[]}}}class Pn extends _e{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}async subscribeOne(e,t){return console.warn("PocketBase: subscribeOne(recordId, callback) is deprecated. Please replace it with subscribe(recordId, callback)."),this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,t)}async subscribe(e,t){if(typeof e=="function")return console.warn("PocketBase: subscribe(callback) is deprecated. Please replace it with subscribe('*', callback)."),this.client.realtime.subscribe(this.collectionIdOrName,e);if(!t)throw new Error("Missing subscription callback.");if(e==="")throw new Error("Missing topic.");let r=this.collectionIdOrName;return e!=="*"&&(r+="/"+e),this.client.realtime.subscribe(r,t)}async unsubscribe(e){return e==="*"?this.client.realtime.unsubscribe(this.collectionIdOrName):e?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)}getFullList(e,t){if(typeof e=="number")return super.getFullList(e,t);const r=Object.assign({},e,t);return super.getFullList(r)}getList(e=1,t=30,r){return super.getList(e,t,r)}getFirstListItem(e,t){return super.getFirstListItem(e,t)}getOne(e,t){return super.getOne(e,t)}create(e,t){return super.create(e,t)}update(e,t,r){return super.update(e,t,r).then(i=>{var s,o,c;return((s=this.client.authStore.model)==null?void 0:s.id)!==(i==null?void 0:i.id)||((o=this.client.authStore.model)==null?void 0:o.collectionId)!==this.collectionIdOrName&&((c=this.client.authStore.model)==null?void 0:c.collectionName)!==this.collectionIdOrName||this.client.authStore.save(this.client.authStore.token,i),i})}delete(e,t){return super.delete(e,t).then(r=>{var i,s,o;return!r||((i=this.client.authStore.model)==null?void 0:i.id)!==e||((s=this.client.authStore.model)==null?void 0:s.collectionId)!==this.collectionIdOrName&&((o=this.client.authStore.model)==null?void 0:o.collectionName)!==this.collectionIdOrName||this.client.authStore.clear(),r})}authResponse(e){const t=this.decode((e==null?void 0:e.record)||{});return this.client.authStore.save(e==null?void 0:e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",record:t})}listAuthMethods(e){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCollectionPath+"/auth-methods",e).then(t=>Object.assign({},t,{usernamePassword:!!(t!=null&&t.usernamePassword),emailPassword:!!(t!=null&&t.emailPassword),authProviders:Array.isArray(t==null?void 0:t.authProviders)?t==null?void 0:t.authProviders:[]}))}authWithPassword(e,t,r,i){let s={method:"POST",body:{identity:e,password:t}};return s=P("This form of authWithPassword(usernameOrEmail, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(usernameOrEmail, pass, options?).",s,r,i),this.client.send(this.baseCollectionPath+"/auth-with-password",s).then(o=>this.authResponse(o))}authWithOAuth2Code(e,t,r,i,s,o,c){let a={method:"POST",body:{provider:e,code:t,codeVerifier:r,redirectUrl:i,createData:s}};return a=P("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, options?).",a,o,c),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",a).then(l=>this.authResponse(l))}async authWithOAuth2(...e){if(e.length>1||typeof(e==null?void 0:e[0])=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code((e==null?void 0:e[0])||"",(e==null?void 0:e[1])||"",(e==null?void 0:e[2])||"",(e==null?void 0:e[3])||"",(e==null?void 0:e[4])||{},(e==null?void 0:e[5])||{},(e==null?void 0:e[6])||{});const t=(e==null?void 0:e[0])||{},r=(await this.listAuthMethods()).authProviders.find(a=>a.name===t.provider);if(!r)throw new q(new Error(`Missing or invalid provider "${t.provider}".`));const i=this.client.buildUrl("/api/oauth2-redirect"),s=new Ot(this.client);let o=null;function c(){o==null||o.close(),s.unsubscribe()}return t.urlCallback||(o=Ze(void 0)),new Promise(async(a,l)=>{var u;try{await s.subscribe("@oauth2",async f=>{const m=s.clientId;try{if(!f.state||m!==f.state)throw new Error("State parameters don't match.");const b=Object.assign({},t);delete b.provider,delete b.scopes,delete b.createData,delete b.urlCallback;const g=await this.authWithOAuth2Code(r.name,f.code,r.codeVerifier,i,t.createData,b);a(g)}catch(b){l(new q(b))}c()});const d={state:s.clientId};(u=t.scopes)!=null&&u.length&&(d.scope=t.scopes.join(" "));const v=this._replaceQueryParams(r.authUrl+i,d);await(t.urlCallback||function(f){o?o.location.href=f:o=Ze(f)})(v)}catch(d){c(),l(new q(d))}})}authRefresh(e,t){let r={method:"POST"};return r=P("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",r,e,t),this.client.send(this.baseCollectionPath+"/auth-refresh",r).then(i=>this.authResponse(i))}requestPasswordReset(e,t,r){let i={method:"POST",body:{email:e}};return i=P("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",i,t,r),this.client.send(this.baseCollectionPath+"/request-password-reset",i).then(()=>!0)}confirmPasswordReset(e,t,r,i,s){let o={method:"POST",body:{token:e,password:t,passwordConfirm:r}};return o=P("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",o,i,s),this.client.send(this.baseCollectionPath+"/confirm-password-reset",o).then(()=>!0)}requestVerification(e,t,r){let i={method:"POST",body:{email:e}};return i=P("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",i,t,r),this.client.send(this.baseCollectionPath+"/request-verification",i).then(()=>!0)}confirmVerification(e,t,r){let i={method:"POST",body:{token:e}};return i=P("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",i,t,r),this.client.send(this.baseCollectionPath+"/confirm-verification",i).then(()=>!0)}requestEmailChange(e,t,r){let i={method:"POST",body:{newEmail:e}};return i=P("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",i,t,r),this.client.send(this.baseCollectionPath+"/request-email-change",i).then(()=>!0)}confirmEmailChange(e,t,r,i){let s={method:"POST",body:{token:e,password:t}};return s=P("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",s,r,i),this.client.send(this.baseCollectionPath+"/confirm-email-change",s).then(()=>!0)}listExternalAuths(e,t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths",t)}unlinkExternalAuth(e,t,r){return r=Object.assign({method:"DELETE"},r),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths/"+encodeURIComponent(t),r).then(()=>!0)}_replaceQueryParams(e,t={}){let r=e,i="";e.indexOf("?")>=0&&(r=e.substring(0,e.indexOf("?")),i=e.substring(e.indexOf("?")+1));const s={},o=i.split("&");for(const c of o){if(c=="")continue;const a=c.split("=");s[decodeURIComponent(a[0].replace(/\+/g," "))]=decodeURIComponent((a[1]||"").replace(/\+/g," "))}for(let c in t)t.hasOwnProperty(c)&&(t[c]==null?delete s[c]:s[c]=t[c]);i="";for(let c in s)s.hasOwnProperty(c)&&(i!=""&&(i+="&"),i+=encodeURIComponent(c.replace(/%20/g,"+"))+"="+encodeURIComponent(s[c].replace(/%20/g,"+")));return i!=""?r+"?"+i:r}}function Ze(n){if(typeof window>"u"||!(window!=null&&window.open))throw new q(new Error("Not in a browser context - please pass a custom urlCallback function."));let e=1024,t=768,r=window.innerWidth,i=window.innerHeight;e=e>r?r:e,t=t>i?i:t;let s=r/2-e/2,o=i/2-t/2;return window.open(n,"popup_window","width="+e+",height="+t+",top="+o+",left="+s+",resizable,menubar=no")}class En extends _e{get baseCrudPath(){return"/api/collections"}async import(e,t=!1,r){return r=Object.assign({method:"PUT",body:{collections:e,deleteMissing:t}},r),this.client.send(this.baseCrudPath+"/import",r).then(()=>!0)}}class xn extends N{getRequestsList(e=1,t=30,r){return(r=Object.assign({method:"GET"},r)).query=Object.assign({page:e,perPage:t},r.query),this.client.send("/api/logs/requests",r)}getRequest(e,t){return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/requests/"+encodeURIComponent(e),t)}getRequestsStats(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/requests/stats",e)}}class In extends N{check(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/health",e)}}class Ln extends N{getUrl(e,t,r={}){if(!t||!(e!=null&&e.id)||!(e!=null&&e.collectionId)&&!(e!=null&&e.collectionName))return"";const i=[];i.push("api"),i.push("files"),i.push(encodeURIComponent(e.collectionId||e.collectionName)),i.push(encodeURIComponent(e.id)),i.push(encodeURIComponent(t));let s=this.client.buildUrl(i.join("/"));if(Object.keys(r).length){r.download===!1&&delete r.download;const o=new URLSearchParams(r);s+=(s.includes("?")?"&":"?")+o}return s}getToken(e){return e=Object.assign({method:"POST"},e),this.client.send("/api/files/token",e).then(t=>(t==null?void 0:t.token)||"")}}class qn extends N{getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/backups",e)}create(e,t){return t=Object.assign({method:"POST",body:{name:e}},t),this.client.send("/api/backups",t).then(()=>!0)}upload(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send("/api/backups/upload",t).then(()=>!0)}delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then(()=>!0)}restore(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then(()=>!0)}getDownloadUrl(e,t){return this.client.buildUrl(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}}const An=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];class ne{constructor(e="/",t,r="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseUrl=e,this.lang=r,this.authStore=t||new Tn,this.admins=new kn(this),this.collections=new En(this),this.files=new Ln(this),this.logs=new xn(this),this.settings=new On(this),this.realtime=new Ot(this),this.health=new In(this),this.backups=new qn(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new Pn(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}filter(e,t){if(!t)return e;for(let r in t){let i=t[r];switch(typeof i){case"boolean":case"number":i=""+i;break;case"string":i="'"+i.replace(/'/g,"\\'")+"'";break;default:i=i===null?"null":i instanceof Date?"'"+i.toISOString().replace("T"," ")+"'":"'"+JSON.stringify(i).replace(/'/g,"\\'")+"'"}e=e.replaceAll("{:"+r+"}",i)}return e}getFileUrl(e,t,r={}){return this.files.getUrl(e,t,r)}buildUrl(e){var r;let t=this.baseUrl;return typeof window>"u"||!window.location||t.startsWith("https://")||t.startsWith("http://")||(t=(r=window.location.origin)!=null&&r.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseUrl.startsWith("/")||(t+=window.location.pathname||"/",t+=t.endsWith("/")?"":"/"),t+=this.baseUrl),e&&(t+=t.endsWith("/")?"":"/",t+=e.startsWith("/")?e.substring(1):e),t}async send(e,t){t=this.initSendOptions(e,t);let r=this.buildUrl(e);if(this.beforeSend){const i=Object.assign({},await this.beforeSend(r,t));i.url!==void 0||i.options!==void 0?(r=i.url||r,t=i.options||t):Object.keys(i).length&&(t=i,console!=null&&console.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}if(t.query!==void 0){const i=this.serializeQueryParams(t.query);i&&(r+=(r.includes("?")?"&":"?")+i),delete t.query}return this.getHeader(t.headers,"Content-Type")=="application/json"&&t.body&&typeof t.body!="string"&&(t.body=JSON.stringify(t.body)),(t.fetch||fetch)(r,t).then(async i=>{let s={};try{s=await i.json()}catch{}if(this.afterSend&&(s=await this.afterSend(i,s)),i.status>=400)throw new q({url:i.url,status:i.status,data:s});return s}).catch(i=>{throw new q(i)})}initSendOptions(e,t){(t=Object.assign({method:"GET"},t)).query=t.query||{},t.body=this.convertToFormDataIfNeeded(t.body);for(let r in t)An.includes(r)||(t.query[r]=t[r],delete t[r]);if(t.query=Object.assign({},t.params,t.query),t.requestKey===void 0&&(t.$autoCancel===!1||t.query.$autoCancel===!1?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,this.getHeader(t.headers,"Content-Type")!==null||this.isFormData(t.body)||(t.headers=Object.assign({},t.headers,{"Content-Type":"application/json"})),this.getHeader(t.headers,"Accept-Language")===null&&(t.headers=Object.assign({},t.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(t.headers,"Authorization")===null&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&t.requestKey!==null){const r=t.requestKey||(t.method||"GET")+e;delete t.requestKey,this.cancelRequest(r);const i=new AbortController;this.cancelControllers[r]=i,t.signal=i.signal}return t}convertToFormDataIfNeeded(e){if(typeof FormData>"u"||e===void 0||typeof e!="object"||e===null||this.isFormData(e)||!this.hasBlobField(e))return e;const t=new FormData;for(let r in e){const i=Array.isArray(e[r])?e[r]:[e[r]];for(let s of i)t.append(r,s)}return t}hasBlobField(e){for(let t in e){const r=Array.isArray(e[t])?e[t]:[e[t]];for(let i of r)if(typeof Blob<"u"&&i instanceof Blob||typeof File<"u"&&i instanceof File)return!0}return!1}getHeader(e,t){e=e||{},t=t.toLowerCase();for(let r in e)if(r.toLowerCase()==t)return e[r];return null}isFormData(e){return e&&(e.constructor.name==="FormData"||typeof FormData<"u"&&e instanceof FormData)}serializeQueryParams(e){const t=[];for(const r in e){if(e[r]===null)continue;const i=e[r],s=encodeURIComponent(r);if(Array.isArray(i))for(const o of i)t.push(s+"="+encodeURIComponent(o));else i instanceof Date?t.push(s+"="+encodeURIComponent(i.toISOString())):typeof i!==null&&typeof i=="object"?t.push(s+"="+encodeURIComponent(JSON.stringify(i))):t.push(s+"="+encodeURIComponent(i))}return t.join("&")}}new ne("https://api.martinbruun.dk");let D=0,k=0,Te=0,_,E,B=[],X=[],kt,te,ye=!1,G;async function Mn(n){E=Vn(n).split(" "),E=_n(E),_=E[D]}function Rn(){const n=document.querySelector("#text");E.forEach((e,t)=>{const r=document.createElement("div");r.classList.add("word"),r.textContent=e,n.appendChild(r)})}function _n(n){return n.map((t,r)=>r<n.length-1?t+" ":t)}function Pt(n){const e=document.querySelector("#word__input");if(document.activeElement!==e)return;const t=_[k];if(n.key.length===1?(B.push(n.key),X.push(n.key),n.key!==t?($n(),k++):(Hn(),k++)):n.key==="Backspace"&&(!k<1&&k--,Nn(),B.pop()),B.length===_.length&&B.join("")===_){ye=!1,D++,k=0,_=E[D];const i=X.join("");X=[],X.push(i),B=[],Te++,It()}Te===E.length&&jn(),ye||(xt(),Bn(),ye=!0)}function je(){function n(o,c){function a(v,S){const f=v.length,m=S.length,b=Array.from(Array(f+1),()=>Array(m+1).fill(0));for(let g=0;g<=f;g++)for(let h=0;h<=m;h++)g===0?b[g][h]=h:h===0?b[g][h]=g:v[g-1]===S[h-1]?b[g][h]=b[g-1][h-1]:b[g][h]=1+Math.min(b[g-1][h],b[g][h-1],b[g-1][h-1]);return b[f][m]}const l=a(o,c),u=Math.max(o.length,c.length);return(u-l)/u*100}const e=Math.round(te.getTime()/1e3),t=Math.floor(E.join(" ").length/5/(e/60)),r=n(E.join(""),X.join("")).toFixed(0),i=r/100,s=Math.round(t*i);return{grossWPM:t,netWPM:s,accuracy:r}}function jn(){G=je(),Dn(),Wn(),Jn(),mn(),Fn(),te.stop(),clearInterval(kt)}function Dn(){z.get("netWPM")?z.get("netWPM")<G.netWPM&&z.set("netWPM",G.netWPM):z.set("netWPM",G.netWPM)}function Wn(){const n=document.querySelector(".game"),e=document.createElement("div");e.classList.add("new_highscore__div"),z.get("netWPM")<G.netWPM?(e.innerHTML=`
    <h1>Your new highscore is: ${G.netWPM} WPM</h1>
    <label>
    Enter your name:
    <input class="highscore__name__input"></input>
    </label>
    <button class="button__play button__play--submit">Submit highscore</button>
    `,document.querySelector(".button__play--submit")):(e.innerHTML=`
    <h1>Your current highscore is: ${z.get("netWPM")} WPM</h1>
    <button class="button__play">Play again</button>
  `,document.querySelector(".button__play")),n.appendChild(e)}function Un(){document.addEventListener("keydown",Pt),document.querySelector("#word__input").addEventListener("keydown",Et)}function Et(n){n.ctrlKey&&n.key==="a"&&n.preventDefault()}function Fn(){document.removeEventListener("keydown",Pt),document.removeEventListener("keydown",Et)}function xt(){const n=document.querySelectorAll("#text > div"),e=n[D-1],t=n[D];_&&(t.style.backgroundColor="rgb(100, 100, 100)",t.classList.add("current")),e&&(e.style.backgroundColor="rgb(20, 20, 20)",e.classList.remove("current"),e.textContent=E[D-1])}function Bn(){if(Te!==E.length){const e=document.querySelectorAll("#text > div")[D],t=e.textContent.split("");e.textContent="",t.forEach((r,i)=>{e.innerHTML+=`
    <div class="char__${i+1}">
      <p>${r}</p>
    </div>
  `})}}function Hn(){if(k<_.length){const n=document.querySelector(`.char__${k+1}`),e=E[D],t=B.join("");e[k]===t[k]?n.style.backgroundColor="rgba(99, 207, 95, 1)":n.style.backgroundColor=""}}function Nn(){if(k<_.length){const n=document.querySelector(`.char__${k+1}`);n.style.backgroundColor=""}}function $n(){if(k<_.length){const n=document.querySelector(`.char__${k+1}`);if(n){const e=E[D],t=B.join("");e[k]!==t[k]?n.style.backgroundColor="rgba(207, 95, 125, 1)":n.style.backgroundColor=""}}}function Vn(n){const e={"!":"","?":"",'"':"",":":"",";":"","-":"","…":""};return Object.keys(e).forEach(t=>{n=n.replaceAll(t,e[t])}),n}function It(){const n=document.querySelector("#word__input");e(1).then(()=>{n.value=""}),n.focus();function e(t){return new Promise(r=>setTimeout(r,t))}}function Kn(){te=new jt,te.start(),kt=setInterval(()=>{const n=Math.round(te.getTime()/1e3);document.getElementById("time").innerText=n},100)}function zn(){const n=document.querySelector("#accuracy"),e=document.querySelector("#WPM");setInterval(()=>{const t=je();t.grossWPM===1/0?e.textContent="0":e.textContent=t.grossWPM,n.textContent=t.accuracy+"%"},100)}function Gn(){const n=document.querySelector("main");n.innerHTML=`
  <div class="game">
        <div id="information">
        <div class="wpm__con">
            <h5>WPM</h5>
            <h1 id="WPM">0</h1>
          </div>
          <i class="fa-solid fa-xmark"></i>
          <div class="accuracy__con">
            <h5>Accuracy</h3>
            <h1 id="accuracy">0%</h1>
          </div>
          <i class="fa-solid fa-equals"></i>
          <div class="time__con">
            <h5>Time</h5>
            <h1 id="time" >0</h1>
          </div>
        </div>
        <div id="text"></div>
        <input id="word__input" type="text" />
      </div>
  `}function Jn(){const n=document.querySelector(".time__con h5"),e=document.querySelector(".time__con h1"),t=je();e.textContent=t.netWPM,n.innerHTML="Net WPM"}async function Qn(n){Mn(n).then(()=>{Gn(),Rn(),Un(),Kn(),xt(),It(),zn()})}async function Zn(n){const e=await fetch(`https://api.quotable.io/quotes/random?minLength=${n-20}&maxLength=${n+20}`),t=await e.json();if(e.ok)return t[0].content}class Yn{static removeMenu(){const e=document.querySelector(".buttons__con");e.style.display="none"}static removeHighscore(){document.querySelector(".highscore").remove()}static removeBackground(){document.querySelector(".background_animation").remove()}static setGameMenu(){const e=document.querySelector("main"),t=e.innerHTML;e.innerHTML=t}static async startCountdown(){const e=document.querySelector("main"),t=document.createElement("h1");t.textContent=3,t.classList.add("countdown"),e.appendChild(t);for(let r=3;r>=1;r--)t.textContent=r,await Ye(990),r===1&&t.remove()}static async startGame(e){const t=await Zn(e);this.removeMenu(),this.removeHighscore(),this.startCountdown(),await Ye(3e3),this.removeBackground(),Qn(t)}}function Ye(n){return new Promise(e=>setTimeout(e,n))}async function Xn(){return await new ne("https://api.martinbruun.dk").collection("highscores").getFullList({sort:"-netWPM",expand:"user"})}class Lt{start(e){const t=document.querySelector(`.${e}`);t.style.display="block"}stop(e){const t=document.querySelector(`.${e}`);t.style.display="none"}}const Xe=document.querySelector(".login__p"),er=document.querySelector(".login__button"),et=document.querySelector(".fa-user"),tt=document.querySelector(".login__username"),nt=new ne("https://api.martinbruun.dk");function De(){const n=Xe;nt.authStore.isValid?(tt.textContent=nt.authStore.model.username,Xe.remove(),et.style.fontSize="25px"):(tt.textContent="",et.style.fontSize="16px",er.appendChild(n))}const qt=document.querySelector(".highscore"),tr=document.querySelector(".play"),nr=document.querySelector("#select__length"),rt=window.matchMedia("(prefers-reduced-motion: reduce)")===!0||window.matchMedia("(prefers-reduced-motion: reduce)").matches===!0;window.onload=async()=>{De(),rt?qt.style.opacity="1":yn();const n=new Lt;n.start("ring-highscore"),await rr(),rt||vn(),n.stop("ring-highscore")};tr.addEventListener("click",async n=>{n.preventDefault(),Yn.startGame(nr.value)});async function rr(){const n=await Xn();try{let e=1;n.forEach(t=>{const r=document.createElement("div");r.classList.add("user"),r.classList.add(`user__${e}`),t.expand&&(e++,r.innerHTML=`
    <p>${t.expand.user.username}</p>
    <p>${t.netWPM}</p>
   `,qt.appendChild(r))})}catch(e){console.error(e)}}const At=new ne("https://api.martinbruun.dk");async function ir(n,e){try{return await At.collection("users").create({username:n,password:e,passwordConfirm:e}),Mt(n,e),!0}catch(t){console.error(t)}}async function Mt(n,e){try{return await At.collection("users").authWithPassword(n,e),De(),!0}catch(t){console.error(t)}}const Oe=new ne("https://api.martinbruun.dk"),H=new Lt,sr=document.querySelector(".login__button"),A=document.querySelector(".login"),or=document.querySelector(".fa-xmark"),ar=document.querySelector("#button__login"),cr=document.querySelector("#button__register"),U=document.querySelector(".login form"),W=document.querySelector("#login__msg");H.stop("ring-login");sr.addEventListener("click",()=>{A.style.display="block",Oe.authStore.isValid&&ur()});or.addEventListener("click",()=>{A.style.display="none"});U.addEventListener("keydown",n=>{n.key==="Enter"&&n.preventDefault()});ar.addEventListener("click",async n=>{n.preventDefault(),W.textContent="",H.start("ring-login");const e=U.username.value,t=U.password.value;await Mt(e,t)?(H.stop("ring-login"),A.style.display="none"):(H.stop("ring-login"),W.textContent="error. try again")});cr.addEventListener("click",async n=>{if(n.preventDefault(),W.textContent="",H.start("ring-login"),!lr())return;const t=U.username.value.toLowerCase(),r=U.password.value;await ir(t,r)?(H.stop("ring-login"),A.style.display="none"):(H.stop("ring-login"),W.textContent="error. try again")});function ur(){A.innerHTML="";const n=document.createElement("div");n.classList.add("login__user-menu"),n.innerHTML=`
    <p>hi, ${Oe.authStore.model.username}</p>
    <button class="login__logout-btn" >Logout</button>
  `,A.appendChild(n),A.querySelector(".login__logout-btn").addEventListener("click",()=>{Oe.authStore.clear(),De(),A.style.display="none",A.innerHTML="",A.append(U)})}function lr(){const n=U.username.value,e=U.password.value,t=/^[a-zA-Z0-9]+$/;return n.length<3?(W.textContent="username is too short (min 3)",!1):e.length<8?(W.textContent="Password is too short (min 8)",!1):!n||!e?(W.textContent="username or password is empty",!1):!t.test(n)||!t.test(e)?(W.textContent="username or password contains invalid characters",!1):!0}
