(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const m of s.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();async function v(e){const t=await fetch(`https://api.quotable.io/quotes/random?minLength=${e}&maxLength=${e+50}`),r=await t.json();if(t.ok)return r[0].content}class p{static removeMenu(){const t=document.querySelector(".buttons__con");t.style.display="none"}static async startTimer(){const t=document.querySelector("main"),r=document.createElement("h1");r.textContent=5,r.classList.add("countdown"),t.appendChild(r);for(let o=5;o>=1;o--)r.textContent=o,await h(990),o===1&&r.remove()}static async startGame(){document.querySelector(".highscore").remove(),await h(5e3);const r=document.querySelector("select"),o=await v(r.value),n=document.querySelector(".app");return document.querySelector(".app__text").remove(),n.style.display="flex",o}}function h(e){return new Promise(t=>setTimeout(t,e))}async function S(){try{const e=await fetch("http://164.92.224.247:3000/api/data");if(!e.ok)throw new Error("Response not ok");return await e.json()}catch(e){console.log("Error: ",e)}}class x{constructor(){this.isRunning=!1,this.startTime=0,this.overallTime=0}_getTimeElapsedSinceLastStart(){return this.startTime?Date.now()-this.startTime:0}start(){if(this.isRunning)return console.error("Timer is already running");this.isRunning=!0,this.startTime=Date.now()}stop(){if(!this.isRunning)return console.error("Timer is already stopped");this.isRunning=!1,this.overallTime=this.overallTime+this._getTimeElapsedSinceLastStart()}reset(){if(this.overallTime=0,this.isRunning){this.startTime=Date.now();return}this.startTime=0}getTime(){return this.startTime?this.isRunning?this.overallTime+this._getTimeElapsedSinceLastStart():this.overallTime:0}}class E{start(){const t=document.querySelector(".lds-dual-ring");t.style.display="block"}stop(){const t=document.querySelector(".lds-dual-ring");t.style.display="none"}}const L=document.querySelector(".highscore"),i=document.querySelector("span"),q=document.querySelector(".play"),k=(e,t)=>e===t,D=()=>f.length===c.join("").length,f=[];let u,d=0,y,c,g,l;window.onload=async()=>{const e=new E;_(),e.stop()};q.addEventListener("click",async e=>{e.preventDefault(),p.removeMenu(),p.startTimer(),g=await p.startGame(),b(),l=new x,P(),C()});async function _(){const e=Array.from(await S());e.sort((t,r)=>r.score-t.score),e.forEach((t,r)=>{const o=document.createElement("div");o.classList.add("user"),o.classList.add(`user__${r+1}`),o.innerHTML=`
    <p>${t.name}</p>
    <p>${t.score}</p>
   `,L.appendChild(o)})}function b(){c=Array.from(g),u=c[d],R()}function C(){document.addEventListener("keydown",e=>{k(e.key,u)&&(I(),d++,u=c[d]),D()&&j()})}function M(e){return`<span class="currentChar">${e.join("")}</span>`}function I(){f.push(u),i.textContent="";const e=c.join("").slice(d+1),t=M(f);i.innerHTML=`${t}`+e}function R(){i.textContent=c.join("")}function j(){l.stop(),clearInterval(y);const e=Math.round(l.getTime()/1e3),t=Math.floor(c.join(" ").length/5/(e/60));document.getElementById("time").innerText=`WPM: ${t}`,t<=60&&(i.innerText="Thats really bad..."),t>=61&&t<=89&&(i.innerText="You can do better..."),t>=90&&t<=110&&(i.innerText="Alright..."),t>=111&&t<=129&&(i.innerText="Thats really good!"),t>=130&&(i.innerText="wow!!!")}function P(){l.start(),y=setInterval(()=>{const e=Math.round(l.getTime()/1e3);document.getElementById("time").innerText=e},100)}const $=document.querySelector(".app__text"),a=document.querySelector(".mouse__mask");let T;function H(){for(let e=0;e<399;e++){const t=document.createElement("p");t.textContent=0,$.appendChild(t)}T=document.querySelectorAll(".app__text p")}function A(){return"abcdefghijklmnopqrstuvwxyz"[Math.floor(Math.random()*26)]}function w(){T.forEach(e=>{e.textContent=A()})}document.addEventListener("mousemove",e=>{a.style.top=e.pageY-2500+"px",a.style.left=e.pageX-2500+"px",a.style.animation="initial"});document.addEventListener("mouseout",()=>{a.style.top="calc(50% - 2500px)",a.style.left="calc(50% - 2500px)",a.style.animation="maskSpin 10s infinite linear forwards",a.style.animationDelay="5s"});H();w();setInterval(()=>{w()},1e3);
